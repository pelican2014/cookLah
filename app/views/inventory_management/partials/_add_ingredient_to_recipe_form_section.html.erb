<% # enter ingredient code to add ingredient %>
<%= form_tag inventory_management_recipes_path, method: 'post', remote: true, id: 'add_ingredient_to_recipe' do %>
  <!-- ingredient code field -->
  <p>
    <div class="well">
      <h4>Enter Ingredient Code and Quantity to Add to Recipe</h4><br />
      <p>Click Find Ingredients below to look for the code of ingredient or create a new ingredient if not found.</p>
    </div>
    <%= label_tag :ingredient_code, 'Ingredient Code' %>
    <%= text_field_tag :ingredient_code %>

    <% # note: need to update this section after AJAX call %>
    <% # as otherwise the number of hidden fields would remain zero %>
    <% # and the code of newly added ingredients would not be captureed %>
    <% @ingredients_for_recipe.each do |ingredient| %>
      <%= hidden_field_tag 'existing_ingredients_code_for_recipe[]', ingredient.code %>
    <% end %>

    <% # name is only nil here and 'submit' elsewhere for recipes -> create [] only when first open or add ingre %>
    <%= submit_tag 'Add', name: nil %>
  </p>
<% end %>